@using BiciSendas.Resources
@using NonFactors.Mvc.Grid
@model BiciSendas.Areas.Operaciones.Models.Faqs.FaqIndexVM


@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    .table-hover tbody tr:hover {
        background-color: rgba(0, 0, 0, 0.04);
    }
</style>


@section Scripts{
    <script src="~/js/faq.js"></script>
}

@{
    ViewData["Title"] = "Faqs";
        
    <div class="container d-flex flex-column">
        <div class="row">
            
            <div class="col mt-auto d-md-flex justify-content-md-end pe-0">
                <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modalNuevoFaq"><i class="fa-solid fa-plus"></i> Nuevo</button>
            </div>
        </div>
    </div>
        
    <div id="ListaFaqs" class="col-xs-12 mt-4">
        @(Html
            .Grid(Model.Faqs)
            .Id("gridFaqs")
            .Build(columns =>
            {
                columns.Add(model => model.Identificador);
                columns.Add(model => model.Pregunta);
                columns.Add(model => model.Respuesta);
                columns.Add(model => model.FechaAlta).Formatted("{0:d}");
                columns.Add(model => model.FechaModificacion).Formatted("{0:d}");
                columns.Add(model => "<button class='btnVer btn btn-primary fa-solid fa-magnifying-glass' data-id=\"" + model.Identificador + "\">").Encoded(false).Css("text-center").AsAttributes();
            })
            .Empty("No data found")
            .Pageable(pager =>
            {
                pager.PageSizes = new Dictionary<Int32, String> { { 0, "Todo" }, { 5, "5" }, { 10, "10" }, {20, "20"} };
                pager.ShowPageSizes = true;
                pager.PagesToDisplay = 5;
                pager.CurrentPage = 1;
                pager.RowsPerPage = 5;
            })
            .Sortable()
            .Css("css-classes") // Overwrites all classes with the new ones
            .AppendCss("table-hover") // Appends classes to the current ones
        )
    </div>

    <!-- Modal -->
    <div class="modal fade" id="modalNuevoFaq" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="staticBackdropLabel">@FaqStrings.AnadirFaq</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          @Html.AntiForgeryToken()
          <form id="form_faq" method="post" class="needs-validation" novalidate>
              <div class="modal-body">
                    <div class="row">
                        <div>
                            @Html.LabelFor(m => m.Titulo, null, new { @class="col-form-label"})
                            @Html.EditorFor(m => m.Titulo,  new {htmlAttributes = new {@class="form-control"}})
                            @Html.ValidationMessageFor(m => m.Titulo)
                        </div>
                        <div class="col-lg-2">
                            @Html.LabelFor(m => m.Posicion, null, new { @class="col-form-label"})
                            @Html.EditorFor(m => m.Posicion,  new {htmlAttributes = new {@class="form-control"}})
                            @Html.ValidationMessageFor(m => m.Posicion)
                        </div>
                        <div>
                            @Html.LabelFor(m => m.Descripcion, null, new { @class="col-form-label"})
                            @Html.TextAreaFor(m => m.Descripcion,  new {@class="form-control", @style="height:200px"})
                            @Html.ValidationMessageFor(m => m.Descripcion)
                        </div>
                    </div>
              </div>
              <div class="modal-footer">
                <button type="submit" id="btnGuardar" class="btn btn-success" onclick="guardarFaq()">@FaqStrings.Guardar</button>
              </div>
          </form>
        </div>
      </div>
    </div>
}
